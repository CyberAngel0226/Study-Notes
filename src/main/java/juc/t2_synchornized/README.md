**synchronized 概念：**
对某个对象加锁，线程必须获取锁才能针对对象或者对应代码块进行执行
且遇到异常时默认释放。

**synchronized 的 底层实现：**

JDK早期 重量级 -OS申请锁，导致效率很低。

锁升级：JDK1.5之后

- 对Object加锁：sync(Object)，意味着在对象头上加一个锁的标志，ObjectMode.java
- 有线程来获取Object，markword 记录线程id，不加锁（偏向锁）
- 又来了一个线程，如果有线程争用：升级为自旋锁，默认情况自选十次，
- 线程自选十次之后升级为重量级锁 -OS 里申请资源。

加锁代码执行时间短，且线程数少使用自旋锁，执行时间长，且线程数多使用系统锁。